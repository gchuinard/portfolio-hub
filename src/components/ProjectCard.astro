---
const { entry } = Astro.props;
const href = `/projects/${entry.data.slug ?? entry.slug}`;
const tags = entry.data.tags ?? [];
const stack = entry.data.stack ?? [];
const img = entry.data.image;
---
<a href={href}
   class="group block rounded-2xl overflow-hidden border border-zinc-800 bg-zinc-900/40
          hover:border-brand-500 transition shadow-sm hover:shadow-lg hover:shadow-brand-900/20">
  <!-- Image / placeholder -->
  <div class="relative aspect-video overflow-hidden">
    {img ? (
      <img src={img} alt="" loading="lazy"
           class="h-full w-full object-cover transition duration-500 group-hover:scale-[1.03]" />
    ) : (
      <div class="h-full w-full bg-gradient-to-br from-zinc-800 to-zinc-900 grid place-items-center">
        <span class="text-zinc-500 text-sm">Aperçu indisponible</span>
      </div>
    )}
    <!-- dégradé haut/bas -->
    <div class="pointer-events-none absolute inset-x-0 top-0 h-16 bg-gradient-to-b from-black/40 to-transparent"></div>
    <div class="pointer-events-none absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-black/50 to-transparent"></div>

    <!-- badge featured éventuel -->
    {entry.data.featured && (
      <span class="absolute left-2 top-2 text-[11px] px-2 py-0.5 rounded-full bg-brand-600 text-white shadow">
        En vedette
      </span>
    )}
  </div>

  <!-- Contenu -->
  <div class="p-4">
    <h3 class="text-lg font-semibold group-hover:text-brand-300 transition">{entry.data.title}</h3>
    <p class="mt-1 text-sm text-zinc-400">
      {entry.data.description}
    </p>

    <!-- Tags -->
    {tags.length > 0 && (
      <div class="mt-3 flex flex-wrap gap-2" aria-label="Tags">
        {tags.map(t => <span class="text-[11px] px-2 py-1 bg-zinc-800 rounded-full">{t}</span>)}
      </div>
    )}

    <!-- Stack -->
    {stack.length > 0 && (
      <div class="mt-3 text-[12px] text-zinc-500">
        {stack.join(" • ")}
      </div>
    )}
  </div>
</a>
